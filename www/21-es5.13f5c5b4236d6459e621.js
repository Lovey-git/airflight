!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{AkKA:function(n,i,o){"use strict";o.r(i),o.d(i,"TicketsPageModule",(function(){return w}));var r=o("ofXK"),a=o("3Pt+"),s=o("TEn/"),c=o("tyNb"),u=o("mrSG"),l=o("fXoL"),b=o("hD8V"),h=o("LLt/");function d(e,t){if(1&e){var n=l.Lb();l.Kb(0,"ion-row",3),l.Kb(1,"ion-col"),l.Kb(2,"ion-item",4),l.Ib(3,"ion-icon",5),l.Kb(4,"ion-title",6),l.gc(5),l.Jb(),l.Jb(),l.Jb(),l.Kb(6,"ion-col"),l.Kb(7,"ion-item",4),l.Kb(8,"ion-title",7),l.gc(9),l.Jb(),l.Jb(),l.Jb(),l.Kb(10,"ion-col"),l.Kb(11,"ion-item",4),l.Kb(12,"ion-title",8),l.gc(13),l.Jb(),l.Kb(14,"ion-icon",9),l.Sb("click",(function(){l.cc(n);var e=t.$implicit;return l.Ub().downloadMyFile(e.ticket_id)})),l.Jb(),l.Jb(),l.Jb(),l.Jb()}if(2&e){var i=t.$implicit;l.xb(5),l.ic("Destination: ",i.airport_name,""),l.xb(4),l.ic("Boarding time:",i.boarding_time,""),l.xb(4),l.ic("Ticket no :",i.ticket_id,"")}}var f,g,m,p=[{path:"",component:(f=function(){function n(t,i,o,r,a,s){e(this,n),this.api=t,this.authService=i,this.alertCtrl=o,this.loadingCtrl=r,this.navCtrl=a,this.router=s,this.searchText="",this.count=0}var i,o,r;return i=n,(o=[{key:"ngOnInit",value:function(){}},{key:"downloadMyFile",value:function(e){var t=document.createElement("a");t.setAttribute("target","_self"),t.setAttribute("href","https://kohaku-air.herokuapp.com/download/"+localStorage.getItem("uuid")+e+".pdf"),t.setAttribute("download","Ticket.pdf"),document.body.appendChild(t),t.click(),t.remove()}},{key:"share",value:function(e,t){console.log(t),window.navigator&&window.navigator.share?window.navigator.share({title:e,text:"description",url:"https://che.ac.za/new/#/moreitemdetails/?f_id="+t}).then((function(){return console.log("Successful share")})).catch((function(e){return console.log("Error sharing",e)})):alert("share not supported")}},{key:"init",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(this.searchText),this.api.get_user_tickets(this.searchText).subscribe((function(e){0==e.status?(console.log(e),t.users=e.data,t.count=e.data.length):t.presentAlert(e.msg)}),(function(e){t.presentAlert(e.message)}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"ionViewWillEnter",value:function(){0==this.authService.isLoggedin()?this.router.navigateByUrl("home"):this.init()}},{key:"presentAlert",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"Air Food \u2708\ufe0f",subHeader:"Warning",message:e,buttons:["OK"]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}}])&&t(i.prototype,o),r&&t(i,r),n}(),f.\u0275fac=function(e){return new(e||f)(l.Hb(b.a),l.Hb(h.a),l.Hb(s.b),l.Hb(s.K),l.Hb(s.N),l.Hb(c.g))},f.\u0275cmp=l.Bb({type:f,selectors:[["app-tickets"]],decls:8,vars:3,consts:[[1,"booking-form"],["showCancelButton","focus",3,"ngModel","ngModelChange"],["style","border-bottom: groove;",4,"ngFor","ngForOf"],[2,"border-bottom","groove"],["lines","none"],["color","success","slot","","name","airplane-outline"],[2,"text-align","left","font-size","medium"],[2,"text-align","center","font-size","medium"],["slot","start",2,"text-align","right","font-size","medium"],["slot","end","name","save-outline",3,"click"]],template:function(e,t){1&e&&(l.Kb(0,"ion-content"),l.Kb(1,"ion-row",0),l.Kb(2,"ion-header"),l.Kb(3,"ion-searchbar",1),l.Sb("ngModelChange",(function(e){return t.searchText=e}))("ngModelChange",(function(){return t.init()})),l.Jb(),l.Jb(),l.Jb(),l.Kb(4,"div",0),l.Kb(5,"ion-list-header"),l.gc(6),l.Jb(),l.fc(7,d,15,3,"ion-row",2),l.Jb(),l.Jb()),2&e&&(l.xb(3),l.Zb("ngModel",t.searchText),l.xb(3),l.ic("Tickets (",t.count,")"),l.xb(1),l.Zb("ngForOf",t.users))},directives:[s.l,s.z,s.p,s.A,s.U,a.h,a.j,s.v,r.h,s.k,s.s,s.q,s.G],styles:[""]}),f)}],v=((m=function t(){e(this,t)}).\u0275mod=l.Fb({type:m}),m.\u0275inj=l.Eb({factory:function(e){return new(e||m)},imports:[[c.j.forChild(p)],c.j]}),m),w=((g=function t(){e(this,t)}).\u0275mod=l.Fb({type:g}),g.\u0275inj=l.Eb({factory:function(e){return new(e||g)},imports:[[r.b,a.d,s.I,v]]}),g)}}])}();