{"version":3,"sources":["webpack:///src/app/tickets/tickets.page.html","webpack:///src/app/tickets/tickets-routing.module.ts","webpack:///src/app/tickets/tickets.module.ts","webpack:///src/app/tickets/tickets.page.scss","webpack:///src/app/tickets/tickets.page.ts"],"names":["routes","path","component","TicketsPageRoutingModule","imports","forChild","exports","TicketsPageModule","declarations","TicketsPage","api","authService","alertCtrl","loadingCtrl","navCtrl","router","searchText","count","t_id","link","document","createElement","setAttribute","localStorage","getItem","body","appendChild","click","remove","title","id","console","log","window","navigator","share","text","then","error","alert","get_user_tickets","subscribe","data","status","users","length","presentAlert","msg","message","isLoggedin","navigateByUrl","init","create","cssClass","header","subHeader","buttons","present","selector","template"],"mappings":"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","file":"tickets-tickets-module-es5.js","sourcesContent":["export default \"<ion-content>\\n  <ion-row   class=\\\"booking-form\\\">\\n    <ion-header>\\n      <ion-searchbar  [(ngModel)]=\\\"searchText\\\" (ngModelChange)=\\\"init()\\\" showCancelButton=\\\"focus\\\"></ion-searchbar>\\n    </ion-header>\\n  </ion-row>\\n\\n  <div  class=\\\"booking-form\\\">\\n    <ion-list-header>Tickets ({{count}})</ion-list-header>\\n\\n    <!-- data table -->\\n    <ion-row style=\\\"border-bottom: groove;\\\" *ngFor=\\\"let item of users;\\\">\\n      <ion-col >\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon  color=\\\"success\\\" slot=\\\"\\\" name=\\\"airplane-outline\\\"></ion-icon>\\n          <ion-title style=\\\"text-align: left;font-size: medium;\\\">Destination: {{item.airport_name}}</ion-title>\\n        </ion-item>\\n      </ion-col>\\n\\n      <ion-col >\\n        <ion-item lines=\\\"none\\\">\\n          <ion-title style=\\\"text-align: center;font-size: medium;\\\">Boarding time:{{item.boarding_time}}</ion-title>\\n        </ion-item>\\n      </ion-col>\\n\\n      \\n\\n      \\n      <ion-col >\\n        <ion-item lines=\\\"none\\\">\\n          <ion-title slot=\\\"start\\\" style=\\\"text-align: right;font-size: medium;\\\">Ticket no :#AF{{item.ticket_id}}</ion-title>\\n          <ion-icon slot=\\\"end\\\" (click)=\\\"downloadMyFile(item.ticket_id)\\\" name=\\\"save-outline\\\"></ion-icon>\\n        </ion-item>\\n      </ion-col>\\n    </ion-row>\\n  </div>\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TicketsPage } from './tickets.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TicketsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TicketsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TicketsPageRoutingModule } from './tickets-routing.module';\n\nimport { TicketsPage } from './tickets.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TicketsPageRoutingModule\n  ],\n  declarations: [TicketsPage]\n})\nexport class TicketsPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3RpY2tldHMvdGlja2V0cy5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { ApiService } from '../../services/api.service';\nimport { AlertController, PickerController, LoadingController, MenuController, NavController } from '@ionic/angular';\nimport { AuthService } from '../../services/auth.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-tickets',\n  templateUrl: './tickets.page.html',\n  styleUrls: ['./tickets.page.scss'],\n})\nexport class TicketsPage implements OnInit {\n\n  constructor(\n    private api: ApiService,\n    private authService: AuthService,\n    private alertCtrl: AlertController,\n    public loadingCtrl: LoadingController,\n    public navCtrl: NavController,\n    private router: Router,\n  ) { }\n\n  users: any[];\n  searchText: any = '';\n  count = 0;\n\n  ngOnInit() {\n    \n  }\n\n  downloadMyFile(t_id) {\n    const link = document.createElement('a');\n    link.setAttribute('target', '_self');\n    link.setAttribute('href', 'https://kohaku-b.herokuapp.com/download/' + localStorage.getItem('uuid') + t_id + '.pdf');\n    link.setAttribute('download', `Ticket.pdf`);\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n  }\n\n  share(title, id) {\n    console.log(id);\n    if (window.navigator && window.navigator.share) {\n      window.navigator['share']({\n        title: title,\n        text: 'description',\n        'url': 'https://che.ac.za/new/#/moreitemdetails/?f_id=' + id\n      })\n        .then(() => console.log('Successful share'))\n        .catch((error) => console.log('Error sharing', error));\n    } else {\n      alert('share not supported');\n    }\n  }\n\n  async init(){\n    console.log(this.searchText);\n    this.api.get_user_tickets(this.searchText).subscribe(\n      data => {\n        if (data.status == 0) {\n          console.log(data);\n          this.users = data.data;\n          this.count = data.data.length;\n        } else {\n          this.presentAlert(data.msg);\n        }\n      }, error => {\n        this.presentAlert(error.message);\n      }\n    );\n  }\n\n  ionViewWillEnter() {\n    if (this.authService.isLoggedin() == false) {\n      this.router.navigateByUrl('home');\n    }else{\n      this.init();\n    }\n  }\n\n  async presentAlert(msg) {\n    const alert = await this.alertCtrl.create({\n      cssClass: 'my-custom-class',\n      header: 'Air Food ✈️',\n      subHeader: 'Warning',\n      message: msg,\n      buttons: ['OK']\n    });\n    await alert.present();\n  }\n\n\n}\n"]}