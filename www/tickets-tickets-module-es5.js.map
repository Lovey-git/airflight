{"version":3,"sources":["webpack:///src/app/tickets/tickets.page.html","webpack:///src/app/tickets/tickets-routing.module.ts","webpack:///src/app/tickets/tickets.module.ts","webpack:///src/app/tickets/tickets.page.scss","webpack:///src/app/tickets/tickets.page.ts"],"names":["routes","path","component","TicketsPageRoutingModule","imports","forChild","exports","TicketsPageModule","declarations","TicketsPage","api","authService","alertCtrl","loadingCtrl","navCtrl","router","searchText","count","t_id","link","document","createElement","setAttribute","localStorage","getItem","body","appendChild","click","remove","title","id","console","log","window","navigator","share","text","then","error","alert","get_user_tickets","subscribe","data","status","users","length","presentAlert","msg","message","isLoggedin","navigateByUrl","init","create","cssClass","header","subHeader","buttons","present","selector","template"],"mappings":"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","file":"tickets-tickets-module-es5.js","sourcesContent":["export default \"<ion-content>\\r\\n  <ion-row   class=\\\"booking-form\\\">\\r\\n    <ion-header>\\r\\n      <ion-searchbar  [(ngModel)]=\\\"searchText\\\" (ngModelChange)=\\\"init()\\\" showCancelButton=\\\"focus\\\"></ion-searchbar>\\r\\n    </ion-header>\\r\\n  </ion-row>\\r\\n\\r\\n  <div  class=\\\"booking-form\\\">\\r\\n    <ion-list-header>Tickets ({{count}})</ion-list-header>\\r\\n\\r\\n    <!-- data table -->\\r\\n    <ion-row style=\\\"border-bottom: groove;\\\" *ngFor=\\\"let item of users;\\\">\\r\\n      <ion-col >\\r\\n        <ion-item lines=\\\"none\\\">\\r\\n          <ion-icon  color=\\\"success\\\" slot=\\\"\\\" name=\\\"airplane-outline\\\"></ion-icon>\\r\\n          <ion-title style=\\\"text-align: left;font-size: medium;\\\">Destination: {{item.airport_name}}</ion-title>\\r\\n        </ion-item>\\r\\n      </ion-col>\\r\\n\\r\\n      <ion-col >\\r\\n        <ion-item lines=\\\"none\\\">\\r\\n          <ion-title style=\\\"text-align: center;font-size: medium;\\\">Boarding time:{{item.boarding_time}}</ion-title>\\r\\n        </ion-item>\\r\\n      </ion-col>\\r\\n\\r\\n      \\r\\n\\r\\n      \\r\\n      <ion-col >\\r\\n        <ion-item lines=\\\"none\\\">\\r\\n          <ion-title slot=\\\"start\\\" style=\\\"text-align: right;font-size: medium;\\\">Ticket no :#AF{{item.ticket_id}}</ion-title>\\r\\n          <ion-icon slot=\\\"end\\\" (click)=\\\"downloadMyFile(item.ticket_id)\\\" name=\\\"save-outline\\\"></ion-icon>\\r\\n        </ion-item>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </div>\\r\\n\\r\\n</ion-content>\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { TicketsPage } from './tickets.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: TicketsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class TicketsPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { TicketsPageRoutingModule } from './tickets-routing.module';\r\n\r\nimport { TicketsPage } from './tickets.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TicketsPageRoutingModule\r\n  ],\r\n  declarations: [TicketsPage]\r\n})\r\nexport class TicketsPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3RpY2tldHMvdGlja2V0cy5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { ApiService } from '../../services/api.service';\r\nimport { AlertController, PickerController, LoadingController, MenuController, NavController } from '@ionic/angular';\r\nimport { AuthService } from '../../services/auth.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-tickets',\r\n  templateUrl: './tickets.page.html',\r\n  styleUrls: ['./tickets.page.scss'],\r\n})\r\nexport class TicketsPage implements OnInit {\r\n\r\n  constructor(\r\n    private api: ApiService,\r\n    private authService: AuthService,\r\n    private alertCtrl: AlertController,\r\n    public loadingCtrl: LoadingController,\r\n    public navCtrl: NavController,\r\n    private router: Router,\r\n  ) { }\r\n\r\n  users: any[];\r\n  searchText: any = '';\r\n  count = 0;\r\n\r\n  ngOnInit() {\r\n    \r\n  }\r\n\r\n  downloadMyFile(t_id) {\r\n    const link = document.createElement('a');\r\n    link.setAttribute('target', '_self');\r\n    link.setAttribute('href', 'https://kohaku-b.herokuapp.com/download/' + localStorage.getItem('uuid') + t_id + '.pdf');\r\n    link.setAttribute('download', `Ticket.pdf`);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    link.remove();\r\n  }\r\n\r\n  share(title, id) {\r\n    console.log(id);\r\n    if (window.navigator && window.navigator.share) {\r\n      window.navigator['share']({\r\n        title: title,\r\n        text: 'description',\r\n        'url': 'https://che.ac.za/new/#/moreitemdetails/?f_id=' + id\r\n      })\r\n        .then(() => console.log('Successful share'))\r\n        .catch((error) => console.log('Error sharing', error));\r\n    } else {\r\n      alert('share not supported');\r\n    }\r\n  }\r\n\r\n  async init(){\r\n    console.log(this.searchText);\r\n    this.api.get_user_tickets(this.searchText).subscribe(\r\n      data => {\r\n        if (data.status == 0) {\r\n          console.log(data);\r\n          this.users = data.data;\r\n          this.count = data.data.length;\r\n        } else {\r\n          this.presentAlert(data.msg);\r\n        }\r\n      }, error => {\r\n        this.presentAlert(error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    if (this.authService.isLoggedin() == false) {\r\n      this.router.navigateByUrl('home');\r\n    }else{\r\n      this.init();\r\n    }\r\n  }\r\n\r\n  async presentAlert(msg) {\r\n    const alert = await this.alertCtrl.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Air Food ✈️',\r\n      subHeader: 'Warning',\r\n      message: msg,\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n\r\n}\r\n"]}