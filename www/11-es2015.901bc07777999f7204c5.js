(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{X3zk:function(e,t,s){"use strict";s.r(t),s.d(t,"LoginPageModule",(function(){return p}));var r=s("ofXK"),i=s("3Pt+"),o=s("TEn/"),n=s("tyNb"),a=s("mrSG"),l=s("fXoL"),c=s("hD8V"),b=s("T4Fs"),u=s("LLt/");const d=[{path:"",component:(()=>{class e{constructor(e,t,s,r,o,n,a,l){this.router=e,this.fb=t,this.api=s,this.toaster=r,this.authService=o,this.alertCtrl=n,this.loadingCtrl=a,this.navCtrl=l,this.loginForm=this.fb.group({email:["",i.m.required],password:["",i.m.required]})}ngOnInit(){}ionViewWillEnter(){this.authService.isLoggedin()&&("admin"==localStorage.getItem("ur")?this.router.navigateByUrl("report"):(localStorage.getItem("current_page"),this.router.navigateByUrl("home")))}login(){return Object(a.a)(this,void 0,void 0,(function*(){let e=this.loginForm.get("email").value,t=this.loginForm.get("password").value;const s=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});""==e?this.presentAlert("Email is required"):""==t?this.presentAlert("Password is required"):(yield s.present(),this.authService.login(e,t).subscribe(e=>{0==e.status?(s.dismiss(),localStorage.setItem("uuid",e.data[0].uuid),localStorage.setItem("ur",e.data[0].role),window.location.reload()):(s.dismiss(),this.presentAlert(e.msg))},e=>{}))}))}presentAlert(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Air Food \u2708\ufe0f",subHeader:"Warning",message:e,buttons:["OK"]});yield t.present()}))}resetPass(){return Object(a.a)(this,void 0,void 0,(function*(){let e=this.loginForm.get("email").value;const t=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Reset Password!",inputs:[{name:"email",type:"text",placeholder:"Enter your Email",cssClass:"specialClass",attributes:{inputmode:"decimal",value:""}}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Ok",handler:t=>Object(a.a)(this,void 0,void 0,(function*(){const s=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});t.email.length<3?this.presentAlert("Email Required"):(yield s.present(),this.api.reset_password(e).subscribe(e=>{0==e.status?(s.dismiss(),console.log(e)):(s.dismiss(),this.presentAlert(e.msg))},e=>{s.dismiss(),this.presentAlert(e.message)}))}))}]});yield t.present()}))}revert(){this.loginForm.reset()}}return e.\u0275fac=function(t){return new(t||e)(l.Hb(n.g),l.Hb(i.a),l.Hb(c.a),l.Hb(b.a),l.Hb(u.a),l.Hb(o.b),l.Hb(o.B),l.Hb(o.D))},e.\u0275cmp=l.Bb({type:e,selectors:[["app-login"]],decls:30,vars:1,consts:[["fullscreen",""],[1,"login-form"],[1,"txt-center"],["name","log-in-outline",2,"font-size","55px"],["color","dark"],[3,"formGroup","ngSubmit"],["formControlName","email","type","text","required","","placeholder","Email"],["name","at-outline"],["formControlName","password","required","","placeholder","Password","type","Password"],["slot","start","name","lock-closed-outline"],["type","submit","color","primary",1,"txt-center"],["color","primary","routerLink","/register"],["color","primary",3,"click"]],template:function(e,t){1&e&&(l.Kb(0,"ion-content",0),l.Kb(1,"ion-grid"),l.Kb(2,"div",1),l.Kb(3,"ion-col"),l.Kb(4,"div",2),l.Ib(5,"ion-icon",3),l.Ib(6,"br"),l.Kb(7,"strong"),l.ec(8,"Login"),l.Jb(),l.Ib(9,"br"),l.Kb(10,"ion-label",4),l.ec(11,"Sign Into Your Account."),l.Jb(),l.Ib(12,"br"),l.Ib(13,"br"),l.Jb(),l.Kb(14,"form",5),l.Sb("ngSubmit",(function(){return t.login()})),l.Kb(15,"ion-input",6),l.Ib(16,"ion-icon",7),l.Jb(),l.Ib(17,"br"),l.Kb(18,"ion-input",8),l.Ib(19,"ion-icon",9),l.Jb(),l.Ib(20,"br"),l.Kb(21,"ion-button",10),l.ec(22,"Login"),l.Jb(),l.Jb(),l.Kb(23,"ion-footer",2),l.Ib(24,"br"),l.Kb(25,"ion-label",11),l.ec(26,"No account? Sign up here."),l.Jb(),l.Ib(27,"br"),l.Kb(28,"ion-label",12),l.Sb("click",(function(){return t.resetPass()})),l.ec(29,"Forgot Password? Click here."),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb()),2&e&&(l.xb(14),l.Xb("formGroup",t.loginForm))},directives:[o.f,o.i,o.e,o.k,o.n,i.n,i.i,i.c,o.l,o.K,i.h,i.b,i.l,o.d,o.h,o.I,n.h],styles:[""]}),e})()}];let m=(()=>{class e{}return e.\u0275mod=l.Fb({type:e}),e.\u0275inj=l.Eb({factory:function(t){return new(t||e)},imports:[[n.i.forChild(d)],n.i]}),e})(),p=(()=>{class e{}return e.\u0275mod=l.Fb({type:e}),e.\u0275inj=l.Eb({factory:function(t){return new(t||e)},imports:[[r.b,i.d,o.z,m,i.k]]}),e})()}}]);