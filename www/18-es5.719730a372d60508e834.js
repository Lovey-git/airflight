!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{cRhG:function(r,n,s){"use strict";s.r(n),s.d(n,"ProfilePageModule",(function(){return y}));var a=s("ofXK"),i=s("3Pt+"),o=s("TEn/"),c=s("tyNb"),l=s("mrSG"),u=s("fXoL"),b=s("hD8V"),d=s("T4Fs"),m=s("LLt/"),p=s("agf6"),f=s("Sy1n");function h(e,t){if(1&e&&(u.Kb(0,"ion-select-option",20),u.gc(1),u.Jb()),2&e){var r=t.$implicit;u.ac("value",r),u.xb(1),u.ic("",r," ")}}var g,v,x,k=[{path:"",component:(g=function(){function r(t,n,s,a,o,c,l,u,b,d){e(this,r),this.router=t,this.fb=n,this.api=s,this.toaster=a,this.authService=o,this.alertCtrl=c,this.loadingCtrl=l,this.navCtrl=u,this.p=b,this.app=d,this.Province=this.p.Province_list,this.profileForm=this.fb.group({email:["",i.m.required],names:["",i.m.required],surname:["",i.m.required],cell:["",i.m.required],dob:["",i.m.required],province:["",i.m.required],gender:["",i.m.required]})}var n,s,a;return n=r,(s=[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){0==this.authService.isLoggedin()?this.router.navigateByUrl("home"):this.doGetUser()}},{key:"deregister",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"Confirm!",message:"<strong>Delete account?  \u26a0\ufe0f</strong>!!!",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"Okay",handler:function(){r.doDeleteUser()}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"deactivate",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"Confirm!",message:"<strong>Deactivate account?  \u26a0\ufe0f</strong>!!!\nYou can always re-activate your account again at a later stage",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"Okay",handler:function(){r.doDeactivateUser()}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"changePass",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"Change Password!",inputs:[{name:"pass",type:"password",placeholder:"New Password",cssClass:"specialClass",attributes:{inputmode:"decimal"}},{name:"pass1",type:"password",placeholder:"Confirm Password",cssClass:"specialClass",attributes:{inputmode:"decimal"}}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Ok",handler:function(e){r.doChangePassword(e.pass,e.pass1)}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"doChangePassword",value:function(e,t){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,s=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});case 2:if(n=r.sent,""!=e&&""!=t){r.next=7;break}this.presentAlert("Password fields required \u26a0\ufe0f"),r.next=18;break;case 7:if(t==e){r.next=11;break}this.presentAlert("Passwords do not match! \u274c"),r.next=18;break;case 11:if(!this.api.validatePass(e)){r.next=15;break}this.presentAlert("Weak Password detected \ud83d\udc4e\u274c"),r.next=18;break;case 15:return r.next=17,n.present();case 17:this.api.update_password(e).subscribe((function(e){0==e.status?(n.dismiss(),s.toaster.successToast(e.msg)):(n.dismiss(),s.presentAlert(e.msg))}),(function(e){n.dismiss(),s.presentAlert(e.message)}));case 18:case"end":return r.stop()}}),r,this)})))}},{key:"doDeleteUser",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});case 2:return t=e.sent,e.next=5,t.present();case 5:this.api.remove_user(localStorage.getItem("uuid")).subscribe((function(e){0==e.status?(t.dismiss(),r.toaster.successToast(e.msg),r.authService.logout()):(t.dismiss(),r.presentAlert(e.msg))}),(function(e){t.dismiss(),r.presentAlert("Could not connect to server \ud83d\udda5\ufe0f, check your internet connection!")}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"doDeactivateUser",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});case 2:return t=e.sent,e.next=5,t.present();case 5:this.api.deactivate_user().subscribe((function(e){0==e.status?(t.dismiss(),r.toaster.successToast(e.msg),r.authService.logout(),r.app.openPage("Booking"),location.reload()):(t.dismiss(),r.presentAlert(e.msg))}),(function(e){t.dismiss(),r.presentAlert("Could not connect to server \ud83d\udda5\ufe0f, check your internet connection!")}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"doGetUser",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});case 2:return t=e.sent,e.next=5,t.present();case 5:this.authService.get_user().subscribe((function(e){0==e.status?(r.profileForm.setValue({email:e.data[0].email,names:e.data[0].name,surname:e.data[0].surname,cell:e.data[0].cell,province:e.data[0].province,gender:e.data[0].gender,dob:e.data[0].date_of_birth}),r.profileForm.controls.email.disable(),t.dismiss()):(t.dismiss(),r.presentAlert(e.msg))}),(function(e){t.dismiss(),r.presentAlert("Could not connect to server \ud83d\udda5\ufe0f, check your internet connection!")}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"doUpdatetUser",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,n,s,a,i,o,c,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});case 2:if(t=e.sent,r=this.profileForm.get("names").value,n=this.profileForm.get("surname").value,s=this.profileForm.get("cell").value,a=this.profileForm.get("gender").value,i=this.profileForm.get("province").value,o=this.profileForm.get("email").value,c=this.profileForm.get("dob").value,null!=o&&""!=a&&""!=i&&""!=r&&""!=n&&""!=s&&""!=c){e.next=8;break}this.presentAlert("All fields are required! \u26a0\ufe0f"),e.next=27;break;case 8:if(!(isNaN(s)||s.length<=9)){e.next=12;break}this.presentAlert("Phone number should consist of only numbers and atleast 10 digits long \u274c"),e.next=27;break;case 12:if(!this.api.validateName(r)&&!this.api.validateName(n)){e.next=16;break}this.presentAlert("names and surname should consist of only characters and no special symbols \u274c"),e.next=27;break;case 16:if(!this.api.validateEmail(o)){e.next=26;break}if(!this.api.validateCell(s)){e.next=23;break}return e.next=20,t.present();case 20:this.api.update_user(r,n,o,s,a,i,c).subscribe((function(e){0==e.status?(t.dismiss(),l.toaster.successToast(e.msg)):(t.dismiss(),l.presentAlert(e.msg))}),(function(e){t.dismiss(),l.presentAlert("Could not connect to server \ud83d\udda5\ufe0f, check your internet connection!")})),e.next=24;break;case 23:this.presentAlert("Invalid Phone number \u274c");case 24:e.next=27;break;case 26:this.presentAlert("Invalid email entered \u274c");case 27:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlert",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"Air Food \u2708\ufe0f",subHeader:"Warning",message:e,buttons:["OK"]});case 2:return r=t.sent,t.next=5,r.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"revert",value:function(){this.profileForm.reset()}}])&&t(n.prototype,s),a&&t(n,a),r}(),g.\u0275fac=function(e){return new(e||g)(u.Hb(c.g),u.Hb(i.a),u.Hb(b.a),u.Hb(d.a),u.Hb(m.a),u.Hb(o.b),u.Hb(o.K),u.Hb(o.N),u.Hb(p.a),u.Hb(f.a))},g.\u0275cmp=u.Bb({type:g,selectors:[["app-profile"]],decls:61,vars:2,consts:[["fullscreen",""],[1,"login-form"],[1,"txt-center"],["name","person-circle-outline",2,"font-size","55px"],["color","dark"],[3,"formGroup"],["formControlName","names","type","text","required","","placeholder","Names"],["formControlName","surname","type","text","required","","placeholder","Surname"],["formControlName","email","type","text","required","","placeholder","Email"],["formControlName","cell","type","text","required","","placeholder","Phone Number"],["formControlName","dob","placeholder","Date Of Birth","disabled","","displayFormat","YYYY-MM-DD","max","2002",1,"txt-center",2,"text-align","center","border","1px solid #3880ff","border-radius","5px"],["formControlName","gender","value","select","okText","Okay","cancelText","Dismiss"],["value","male"],["value","female"],["formControlName","province","value","select","okText","Okay","cancelText","Dismiss",2,"text-align","left"],[3,"value",4,"ngFor","ngForOf"],["color","primary",1,"txt-center",3,"click"],["color","secondary",1,"txt-center",3,"click"],["color","warning",1,"txt-center",3,"click"],["color","danger",1,"txt-center",3,"click"],[3,"value"]],template:function(e,t){1&e&&(u.Kb(0,"ion-content",0),u.Kb(1,"ion-grid"),u.Kb(2,"div",1),u.Kb(3,"div",2),u.Ib(4,"ion-icon",3),u.Ib(5,"br"),u.Kb(6,"strong"),u.gc(7,"Profile"),u.Jb(),u.Ib(8,"br"),u.Kb(9,"ion-label",4),u.gc(10,"Seasons change, so does reasons to your details "),u.Jb(),u.Ib(11,"br"),u.Ib(12,"br"),u.Jb(),u.Kb(13,"form",5),u.Kb(14,"ion-row"),u.Kb(15,"ion-col"),u.Ib(16,"ion-input",6),u.Jb(),u.Jb(),u.Kb(17,"ion-row"),u.Kb(18,"ion-col"),u.Ib(19,"ion-input",7),u.Jb(),u.Jb(),u.Kb(20,"ion-row"),u.Kb(21,"ion-col"),u.Ib(22,"ion-input",8),u.Jb(),u.Kb(23,"ion-col"),u.Ib(24,"ion-input",9),u.Jb(),u.Jb(),u.Kb(25,"ion-row"),u.Kb(26,"ion-col"),u.Ib(27,"ion-datetime",10),u.Jb(),u.Jb(),u.Kb(28,"ion-row"),u.Kb(29,"ion-col"),u.Kb(30,"ion-item"),u.Kb(31,"ion-label"),u.gc(32,"Gender:"),u.Jb(),u.Kb(33,"ion-select",11),u.Kb(34,"ion-select-option",12),u.gc(35,"male"),u.Jb(),u.Kb(36,"ion-select-option",13),u.gc(37,"female"),u.Jb(),u.Jb(),u.Jb(),u.Jb(),u.Jb(),u.Kb(38,"ion-row"),u.Kb(39,"ion-col"),u.Kb(40,"ion-item"),u.Kb(41,"ion-label"),u.gc(42,"Province:"),u.Jb(),u.Kb(43,"ion-select",14),u.fc(44,h,2,2,"ion-select-option",15),u.Jb(),u.Jb(),u.Jb(),u.Jb(),u.Kb(45,"ion-row"),u.Kb(46,"ion-col"),u.Kb(47,"ion-button",16),u.Sb("click",(function(){return t.doUpdatetUser()})),u.gc(48,"Update profile"),u.Jb(),u.Jb(),u.Jb(),u.Kb(49,"ion-row"),u.Kb(50,"ion-col"),u.Kb(51,"ion-button",17),u.Sb("click",(function(){return t.changePass()})),u.gc(52,"Change Password"),u.Jb(),u.Jb(),u.Jb(),u.Kb(53,"ion-row"),u.Kb(54,"ion-col"),u.Kb(55,"ion-button",18),u.Sb("click",(function(){return t.deactivate()})),u.gc(56,"Deactivate Account"),u.Jb(),u.Jb(),u.Kb(57,"ion-col"),u.Kb(58,"ion-button",19),u.Sb("click",(function(){return t.deregister()})),u.gc(59,"Delete Account"),u.Jb(),u.Jb(),u.Jb(),u.Jb(),u.Ib(60,"br"),u.Jb(),u.Jb(),u.Jb()),2&e&&(u.xb(13),u.Zb("formGroup",t.profileForm),u.xb(31),u.Zb("ngForOf",t.Province))},directives:[o.l,o.o,o.q,o.t,i.n,i.i,i.c,o.z,o.k,o.r,o.U,i.h,i.b,i.l,o.m,o.T,o.s,o.D,o.E,a.h,o.e],styles:[""]}),g)}],w=((x=function t(){e(this,t)}).\u0275mod=u.Fb({type:x}),x.\u0275inj=u.Eb({factory:function(e){return new(e||x)},imports:[[c.j.forChild(k)],c.j]}),x),y=((v=function t(){e(this,t)}).\u0275mod=u.Fb({type:v}),v.\u0275inj=u.Eb({factory:function(e){return new(e||v)},imports:[[a.b,i.d,o.I,w,i.k]]}),v)}}])}();