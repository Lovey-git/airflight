(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{AkKA:function(t,e,i){"use strict";i.r(e),i.d(e,"TicketsPageModule",(function(){return g}));var o=i("ofXK"),n=i("3Pt+"),s=i("TEn/"),r=i("tyNb"),c=i("mrSG"),a=i("fXoL"),l=i("hD8V"),b=i("LLt/");function d(t,e){if(1&t){const t=a.Lb();a.Kb(0,"ion-row",3),a.Kb(1,"ion-col"),a.Kb(2,"ion-item",4),a.Ib(3,"ion-icon",5),a.Kb(4,"ion-title",6),a.gc(5),a.Jb(),a.Jb(),a.Jb(),a.Kb(6,"ion-col"),a.Kb(7,"ion-item",4),a.Kb(8,"ion-title",7),a.gc(9),a.Jb(),a.Jb(),a.Jb(),a.Kb(10,"ion-col"),a.Kb(11,"ion-item",4),a.Kb(12,"ion-title",8),a.gc(13),a.Jb(),a.Kb(14,"ion-icon",9),a.Sb("click",(function(){a.cc(t);const i=e.$implicit;return a.Ub().downloadMyFile(i.ticket_id)})),a.Jb(),a.Jb(),a.Jb(),a.Jb()}if(2&t){const t=e.$implicit;a.xb(5),a.ic("Destination: ",t.airport_name,""),a.xb(4),a.ic("Boarding time:",t.boarding_time,""),a.xb(4),a.ic("Ticket no :",t.ticket_id,"")}}const u=[{path:"",component:(()=>{class t{constructor(t,e,i,o,n,s){this.api=t,this.authService=e,this.alertCtrl=i,this.loadingCtrl=o,this.navCtrl=n,this.router=s,this.searchText="",this.count=0}ngOnInit(){}downloadMyFile(t){const e=document.createElement("a");e.setAttribute("target","_self"),e.setAttribute("href","https://kohaku-air.herokuapp.com/download/"+localStorage.getItem("uuid")+t+".pdf"),e.setAttribute("download","Ticket.pdf"),document.body.appendChild(e),e.click(),e.remove()}share(t,e){console.log(e),window.navigator&&window.navigator.share?window.navigator.share({title:t,text:"description",url:"https://che.ac.za/new/#/moreitemdetails/?f_id="+e}).then(()=>console.log("Successful share")).catch(t=>console.log("Error sharing",t)):alert("share not supported")}init(){return Object(c.a)(this,void 0,void 0,(function*(){console.log(this.searchText),this.api.get_user_tickets(this.searchText).subscribe(t=>{0==t.status?(console.log(t),this.users=t.data,this.count=t.data.length):this.presentAlert(t.msg)},t=>{this.presentAlert(t.message)})}))}ionViewWillEnter(){0==this.authService.isLoggedin()?this.router.navigateByUrl("home"):this.init()}presentAlert(t){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Air Food \u2708\ufe0f",subHeader:"Warning",message:t,buttons:["OK"]});yield e.present()}))}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(l.a),a.Hb(b.a),a.Hb(s.b),a.Hb(s.K),a.Hb(s.N),a.Hb(r.g))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-tickets"]],decls:8,vars:3,consts:[[1,"booking-form"],["showCancelButton","focus",3,"ngModel","ngModelChange"],["style","border-bottom: groove;",4,"ngFor","ngForOf"],[2,"border-bottom","groove"],["lines","none"],["color","success","slot","","name","airplane-outline"],[2,"text-align","left","font-size","medium"],[2,"text-align","center","font-size","medium"],["slot","start",2,"text-align","right","font-size","medium"],["slot","end","name","save-outline",3,"click"]],template:function(t,e){1&t&&(a.Kb(0,"ion-content"),a.Kb(1,"ion-row",0),a.Kb(2,"ion-header"),a.Kb(3,"ion-searchbar",1),a.Sb("ngModelChange",(function(t){return e.searchText=t}))("ngModelChange",(function(){return e.init()})),a.Jb(),a.Jb(),a.Jb(),a.Kb(4,"div",0),a.Kb(5,"ion-list-header"),a.gc(6),a.Jb(),a.fc(7,d,15,3,"ion-row",2),a.Jb(),a.Jb()),2&t&&(a.xb(3),a.Zb("ngModel",e.searchText),a.xb(3),a.ic("Tickets (",e.count,")"),a.xb(1),a.Zb("ngForOf",e.users))},directives:[s.l,s.z,s.p,s.A,s.U,n.h,n.j,s.v,o.h,s.k,s.s,s.q,s.G],styles:[""]}),t})()}];let h=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(e){return new(e||t)},imports:[[r.j.forChild(u)],r.j]}),t})(),g=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(e){return new(e||t)},imports:[[o.b,n.d,s.I,h]]}),t})()}}]);