(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{cRhG:function(e,s,t){"use strict";t.r(s),t.d(s,"ProfilePageModule",(function(){return g}));var i=t("ofXK"),r=t("3Pt+"),o=t("TEn/"),n=t("tyNb"),a=t("mrSG"),l=t("fXoL"),c=t("hD8V"),d=t("T4Fs"),b=t("LLt/"),m=t("agf6");function u(e,s){if(1&e&&(l.Kb(0,"ion-select-option",17),l.ec(1),l.Jb()),2&e){const e=s.$implicit;l.Yb("value",e),l.xb(1),l.gc("",e," ")}}const p=[{path:"",component:(()=>{class e{constructor(e,s,t,i,o,n,a,l,c){this.router=e,this.fb=s,this.api=t,this.toaster=i,this.authService=o,this.alertCtrl=n,this.loadingCtrl=a,this.navCtrl=l,this.p=c,this.Province=this.p.Province_list,this.profileForm=this.fb.group({email:["",r.m.required],names:["",r.m.required],surname:["",r.m.required],cell:["",r.m.required],dob:["",r.m.required],province:["",r.m.required],gender:["",r.m.required]})}ngOnInit(){}ionViewWillEnter(){0==this.authService.isLoggedin()?this.router.navigateByUrl("home"):this.doGetUser()}deregister(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Confirm!",message:"<strong>Delete account?</strong>!!!",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"Okay",handler:()=>{this.doDeleteUser()}}]});yield e.present()}))}changePass(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Change Password!",inputs:[{name:"pass",type:"password",placeholder:"New Password",cssClass:"specialClass",attributes:{inputmode:"decimal"}},{name:"pass1",type:"password",placeholder:"Confirm Password",cssClass:"specialClass",attributes:{inputmode:"decimal"}}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Ok",handler:e=>{this.doChangePassword(e.pass,e.pass1)}}]});yield e.present()}))}doChangePassword(e,s){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});""==e||""==s?this.presentAlert("Password fields required"):s!=e?this.presentAlert("Passwords do not match! "):(yield t.present(),this.api.update_password(e).subscribe(e=>{0==e.status?(t.dismiss(),this.toaster.successToast(e.msg)):(t.dismiss(),this.presentAlert(e.msg))},e=>{t.dismiss(),this.presentAlert(e.message)}))}))}doDeleteUser(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});yield e.present(),this.api.remove_user().subscribe(s=>{0==s.status?(e.dismiss(),this.toaster.successToast(s.msg),localStorage.clear()):(e.dismiss(),this.presentAlert(s.msg))},s=>{e.dismiss(),this.presentAlert(s.message)})}))}doGetUser(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});yield e.present(),this.authService.get_user().subscribe(s=>{0==s.status?(this.profileForm.setValue({email:s.data[0].email,names:s.data[0].name,surname:s.data[0].surname,cell:s.data[0].cell,province:s.data[0].province,gender:s.data[0].gender,dob:s.data[0].gender}),e.dismiss()):(e.dismiss(),this.presentAlert(s.msg))},s=>{e.dismiss(),this.presentAlert(s.message)})}))}doUpdatetUser(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});yield e.present();let s=this.profileForm.get("names").value,t=this.profileForm.get("surname").value,i=this.profileForm.get("cell").value,r=this.profileForm.get("gender").value,o=this.profileForm.get("province").value,n=this.profileForm.get("email").value;this.api.update_user(s,t,n,i,r,o).subscribe(s=>{0==s.status?(e.dismiss(),this.toaster.successToast(s.msg)):(e.dismiss(),this.presentAlert(s.msg))},s=>{e.dismiss(),this.presentAlert(s.message)})}))}presentAlert(e){return Object(a.a)(this,void 0,void 0,(function*(){const s=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Air Food \u2708\ufe0f",subHeader:"Warning",message:e,buttons:["OK"]});yield s.present()}))}revert(){this.profileForm.reset()}}return e.\u0275fac=function(s){return new(s||e)(l.Hb(n.g),l.Hb(r.a),l.Hb(c.a),l.Hb(d.a),l.Hb(b.a),l.Hb(o.b),l.Hb(o.B),l.Hb(o.D),l.Hb(m.a))},e.\u0275cmp=l.Bb({type:e,selectors:[["app-profile"]],decls:49,vars:2,consts:[["fullscreen",""],[1,"login-form"],[1,"txt-center"],["name","person-outline",2,"font-size","55px"],["color","dark"],[3,"formGroup"],["formControlName","names","type","text","required","","placeholder","Names"],["formControlName","surname","type","text","required","","placeholder","Surname"],["formControlName","email","type","text","required","","placeholder","Email"],["formControlName","cell","type","text","required","","placeholder","Phone Number"],["formControlName","gender","value","select","okText","Okay","cancelText","Dismiss"],["value","male"],["value","female"],["formControlName","province","value","select","okText","Okay","cancelText","Dismiss"],[3,"value",4,"ngFor","ngForOf"],["type","submit","color","primary",1,"txt-center",3,"click"],["type","submit","color","danger",1,"txt-center",3,"click"],[3,"value"]],template:function(e,s){1&e&&(l.Kb(0,"ion-content",0),l.Kb(1,"ion-grid"),l.Kb(2,"div",1),l.Kb(3,"ion-col"),l.Kb(4,"div",2),l.Ib(5,"ion-icon",3),l.Ib(6,"br"),l.Kb(7,"strong"),l.ec(8,"Profile"),l.Jb(),l.Ib(9,"br"),l.Kb(10,"ion-label",4),l.ec(11,"Seasons change, so does reasons to your details "),l.Jb(),l.Ib(12,"br"),l.Ib(13,"br"),l.Jb(),l.Kb(14,"form",5),l.Kb(15,"ion-row"),l.Kb(16,"ion-col"),l.Ib(17,"ion-input",6),l.Jb(),l.Kb(18,"ion-col"),l.Ib(19,"ion-input",7),l.Jb(),l.Jb(),l.Kb(20,"ion-row"),l.Kb(21,"ion-col"),l.Ib(22,"ion-input",8),l.Jb(),l.Jb(),l.Kb(23,"ion-row"),l.Kb(24,"ion-col"),l.Ib(25,"ion-input",9),l.Jb(),l.Jb(),l.Kb(26,"ion-row"),l.Kb(27,"ion-col"),l.Kb(28,"ion-item"),l.Kb(29,"ion-label"),l.ec(30,"Gender:"),l.Jb(),l.Kb(31,"ion-select",10),l.Kb(32,"ion-select-option",11),l.ec(33,"male"),l.Jb(),l.Kb(34,"ion-select-option",12),l.ec(35,"female"),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Kb(36,"ion-row"),l.Kb(37,"ion-col"),l.Kb(38,"ion-item"),l.Kb(39,"ion-label"),l.ec(40,"Province:"),l.Jb(),l.Kb(41,"ion-select",13),l.dc(42,u,2,2,"ion-select-option",14),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Kb(43,"ion-button",15),l.Sb("click",(function(){return s.doUpdatetUser()})),l.ec(44,"Update profile"),l.Jb(),l.Kb(45,"ion-button",15),l.Sb("click",(function(){return s.changePass()})),l.ec(46,"Change Password"),l.Jb(),l.Kb(47,"ion-button",16),l.Sb("click",(function(){return s.deregister()})),l.ec(48,"Delete Account"),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb()),2&e&&(l.xb(14),l.Xb("formGroup",s.profileForm),l.xb(28),l.Xb("ngForOf",s.Province))},directives:[o.f,o.i,o.e,o.k,o.n,r.n,r.i,r.c,o.r,o.l,o.K,r.h,r.b,r.l,o.m,o.v,o.J,o.w,i.h,o.d],styles:[""]}),e})()}];let h=(()=>{class e{}return e.\u0275mod=l.Fb({type:e}),e.\u0275inj=l.Eb({factory:function(s){return new(s||e)},imports:[[n.i.forChild(p)],n.i]}),e})(),g=(()=>{class e{}return e.\u0275mod=l.Fb({type:e}),e.\u0275inj=l.Eb({factory:function(s){return new(s||e)},imports:[[i.b,r.d,o.z,h,r.k]]}),e})()}}]);