(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{x5bZ:function(e,t,r){"use strict";r.r(t),r.d(t,"RegisterPageModule",(function(){return p}));var s=r("ofXK"),i=r("3Pt+"),o=r("TEn/"),n=r("tyNb"),a=r("mrSG"),l=r("wd/R"),b=r("fXoL"),m=r("hD8V"),u=r("T4Fs"),d=r("LLt/");const c=[{path:"",component:(()=>{class e{constructor(e,t,r,s,o,n,a,b){this.router=e,this.fb=t,this.api=r,this.toaster=s,this.authService=o,this.alertCtrl=n,this.loadingCtrl=a,this.navCtrl=b,this.minDate=l().add(0,"d").format().toString(),this.registerForm=this.fb.group({email:["",i.m.required],password:["",i.m.required],password1:["",i.m.required],names:["",i.m.required],surname:["",i.m.required],cell:["",i.m.required],dob:["",i.m.required]})}ngOnInit(){}ionViewWillEnter(){this.authService.isLoggedin()&&("admin"==localStorage.getItem("ur")?this.router.navigateByUrl("report"):(localStorage.getItem("current_page"),this.router.navigateByUrl("home")))}presentAlert(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Air Food \u2708\ufe0f",subHeader:"Warning",message:e,buttons:["OK"]});yield t.present()}))}register(){return Object(a.a)(this,void 0,void 0,(function*(){let e=this.registerForm.get("email").value,t=this.registerForm.get("password").value,r=this.registerForm.get("password1").value,s=this.registerForm.get("names").value,i=this.registerForm.get("surname").value,o=this.registerForm.get("cell").value;this.dob=this.registerForm.get("dob").value;const n=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});var a=/^[!@#$%^&*()_+\=\[\]{};:"\\|,.<>\/?]*$/;null==e||""==t||""==r||""==s||""==i||""==o?this.presentAlert("All fields are required!"):t!=r?this.presentAlert("Passwords do not match"):isNaN(o)||o.length<=9?this.presentAlert("Phone number should consist of only numbers and atleast 10 digits long"):s.match(a)||i.match(a)||0==isNaN(s)||0==isNaN(i)?this.presentAlert("names and surname should consist of only characters and no special symbols"):this.validateEmail(e)?this.dob.substr(0,10)==this.minDate.substr(0,10)?this.presentAlert("You might just be a very smart \u{1f476} infant to even use a computer!"):parseInt(this.minDate.substr(0,4))-parseInt(this.dob.substr(0,4))<=17?(this.presentAlert("You must be atleast 18 years old to register!"),console.log(parseInt(this.dob.substr(0,4))-parseInt(this.minDate.substr(0,4)))):(yield n.present(),this.api.register(e,t,s,i).subscribe(e=>{0==e.status?(n.dismiss(),console.log(e),this.toaster.successToast(e.msg),this.router.navigateByUrl("login")):(n.dismiss(),this.presentAlert(e.msg))},e=>{n.dismiss(),this.presentAlert(e.message)})):this.presentAlert("Invalid email entered")}))}validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}revert(){this.registerForm.reset()}}return e.\u0275fac=function(t){return new(t||e)(b.Hb(n.g),b.Hb(i.a),b.Hb(m.a),b.Hb(u.a),b.Hb(d.a),b.Hb(o.b),b.Hb(o.B),b.Hb(o.D))},e.\u0275cmp=b.Bb({type:e,selectors:[["app-register"]],decls:35,vars:1,consts:[["fullscreen",""],[1,"login-form"],[1,"txt-center"],["name","person-add-outline",2,"font-size","55px"],["color","dark"],[3,"formGroup"],["formControlName","names","type","text","required","","placeholder","Names"],["formControlName","surname","type","text","required","","placeholder","Surname"],["formControlName","email","type","text","required","","placeholder","Email"],["formControlName","cell","type","tel","required","","placeholder","Phone Number"],["formControlName","dob","placeholder","Date Of Birth","displayFormat","YYYY-MM-DD","max","2020",2,"text-align","center","border","1px solid #3880ff","border-radius","5px"],["formControlName","password","type","password","required","","placeholder","Password"],["formControlName","password1","type","password","required","","placeholder","Confirm Password"],["type","submit","color","primary",1,"txt-center",3,"click"],["color","primary","routerLink","/login"]],template:function(e,t){1&e&&(b.Kb(0,"ion-content",0),b.Kb(1,"ion-grid"),b.Kb(2,"div",1),b.Kb(3,"ion-col"),b.Kb(4,"div",2),b.Ib(5,"ion-icon",3),b.Ib(6,"br"),b.Kb(7,"strong"),b.ec(8,"Register"),b.Jb(),b.Ib(9,"br"),b.Kb(10,"ion-label",4),b.ec(11,"Great adventures begin here!"),b.Jb(),b.Ib(12,"br"),b.Ib(13,"br"),b.Jb(),b.Kb(14,"form",5),b.Ib(15,"ion-input",6),b.Ib(16,"br"),b.Ib(17,"ion-input",7),b.Ib(18,"br"),b.Ib(19,"ion-input",8),b.Ib(20,"br"),b.Ib(21,"ion-input",9),b.Ib(22,"br"),b.Kb(23,"ion-col"),b.Ib(24,"ion-datetime",10),b.Jb(),b.Ib(25,"ion-input",11),b.Ib(26,"br"),b.Ib(27,"ion-input",12),b.Ib(28,"br"),b.Kb(29,"ion-button",13),b.Sb("click",(function(){return t.register()})),b.ec(30,"Register"),b.Jb(),b.Jb(),b.Kb(31,"ion-footer",2),b.Ib(32,"br"),b.Kb(33,"ion-label",14),b.ec(34,"already have an accout? sign in here."),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&e&&(b.xb(14),b.Xb("formGroup",t.registerForm))},directives:[o.f,o.i,o.e,o.k,o.n,i.n,i.i,i.c,o.l,o.K,i.h,i.b,i.l,o.g,o.J,o.d,o.h,o.I,n.h],styles:[""]}),e})()}];let h=(()=>{class e{}return e.\u0275mod=b.Fb({type:e}),e.\u0275inj=b.Eb({factory:function(t){return new(t||e)},imports:[[n.i.forChild(c)],n.i]}),e})(),p=(()=>{class e{}return e.\u0275mod=b.Fb({type:e}),e.\u0275inj=b.Eb({factory:function(t){return new(t||e)},imports:[[s.b,i.d,o.z,h,i.k]]}),e})()}}]);