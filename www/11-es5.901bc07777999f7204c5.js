!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{X3zk:function(r,n,i){"use strict";i.r(n),i.d(n,"LoginPageModule",(function(){return w}));var s,o,a,c=i("ofXK"),u=i("3Pt+"),l=i("TEn/"),b=i("tyNb"),m=i("mrSG"),d=i("fXoL"),p=i("hD8V"),f=i("T4Fs"),h=i("LLt/"),g=[{path:"",component:(s=function(){function r(t,n,i,s,o,a,c,l){e(this,r),this.router=t,this.fb=n,this.api=i,this.toaster=s,this.authService=o,this.alertCtrl=a,this.loadingCtrl=c,this.navCtrl=l,this.loginForm=this.fb.group({email:["",u.m.required],password:["",u.m.required]})}var n,i,s;return n=r,(i=[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){this.authService.isLoggedin()&&("admin"==localStorage.getItem("ur")?this.router.navigateByUrl("report"):(localStorage.getItem("current_page"),this.router.navigateByUrl("home")))}},{key:"login",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.loginForm.get("email").value,r=this.loginForm.get("password").value,e.next=3,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});case 3:if(n=e.sent,""!=t){e.next=8;break}this.presentAlert("Email is required"),e.next=15;break;case 8:if(""!=r){e.next=12;break}this.presentAlert("Password is required"),e.next=15;break;case 12:return e.next=14,n.present();case 14:this.authService.login(t,r).subscribe((function(e){0==e.status?(n.dismiss(),localStorage.setItem("uuid",e.data[0].uuid),localStorage.setItem("ur",e.data[0].role),window.location.reload()):(n.dismiss(),i.presentAlert(e.msg))}),(function(e){}));case 15:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlert",value:function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"Air Food \u2708\ufe0f",subHeader:"Warning",message:e,buttons:["OK"]});case 2:return r=t.sent,t.next=5,r.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"resetPass",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.loginForm.get("email").value,e.next=3,this.alertCtrl.create({cssClass:"my-custom-class",header:"Reset Password!",inputs:[{name:"email",type:"text",placeholder:"Enter your Email",cssClass:"specialClass",attributes:{inputmode:"decimal",value:""}}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Ok",handler:function(e){return Object(m.a)(n,void 0,void 0,regeneratorRuntime.mark((function r(){var n,i=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});case 2:if(n=r.sent,!(e.email.length<3)){r.next=7;break}this.presentAlert("Email Required"),r.next=10;break;case 7:return r.next=9,n.present();case 9:this.api.reset_password(t).subscribe((function(e){0==e.status?(n.dismiss(),console.log(e)):(n.dismiss(),i.presentAlert(e.msg))}),(function(e){n.dismiss(),i.presentAlert(e.message)}));case 10:case"end":return r.stop()}}),r,this)})))}}]});case 3:return r=e.sent,e.next=6,r.present();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"revert",value:function(){this.loginForm.reset()}}])&&t(n.prototype,i),s&&t(n,s),r}(),s.\u0275fac=function(e){return new(e||s)(d.Hb(b.g),d.Hb(u.a),d.Hb(p.a),d.Hb(f.a),d.Hb(h.a),d.Hb(l.b),d.Hb(l.B),d.Hb(l.D))},s.\u0275cmp=d.Bb({type:s,selectors:[["app-login"]],decls:30,vars:1,consts:[["fullscreen",""],[1,"login-form"],[1,"txt-center"],["name","log-in-outline",2,"font-size","55px"],["color","dark"],[3,"formGroup","ngSubmit"],["formControlName","email","type","text","required","","placeholder","Email"],["name","at-outline"],["formControlName","password","required","","placeholder","Password","type","Password"],["slot","start","name","lock-closed-outline"],["type","submit","color","primary",1,"txt-center"],["color","primary","routerLink","/register"],["color","primary",3,"click"]],template:function(e,t){1&e&&(d.Kb(0,"ion-content",0),d.Kb(1,"ion-grid"),d.Kb(2,"div",1),d.Kb(3,"ion-col"),d.Kb(4,"div",2),d.Ib(5,"ion-icon",3),d.Ib(6,"br"),d.Kb(7,"strong"),d.ec(8,"Login"),d.Jb(),d.Ib(9,"br"),d.Kb(10,"ion-label",4),d.ec(11,"Sign Into Your Account."),d.Jb(),d.Ib(12,"br"),d.Ib(13,"br"),d.Jb(),d.Kb(14,"form",5),d.Sb("ngSubmit",(function(){return t.login()})),d.Kb(15,"ion-input",6),d.Ib(16,"ion-icon",7),d.Jb(),d.Ib(17,"br"),d.Kb(18,"ion-input",8),d.Ib(19,"ion-icon",9),d.Jb(),d.Ib(20,"br"),d.Kb(21,"ion-button",10),d.ec(22,"Login"),d.Jb(),d.Jb(),d.Kb(23,"ion-footer",2),d.Ib(24,"br"),d.Kb(25,"ion-label",11),d.ec(26,"No account? Sign up here."),d.Jb(),d.Ib(27,"br"),d.Kb(28,"ion-label",12),d.Sb("click",(function(){return t.resetPass()})),d.ec(29,"Forgot Password? Click here."),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Jb()),2&e&&(d.xb(14),d.Xb("formGroup",t.loginForm))},directives:[l.f,l.i,l.e,l.k,l.n,u.n,u.i,u.c,l.l,l.K,u.h,u.b,u.l,l.d,l.h,l.I,b.h],styles:[""]}),s)}],v=((a=function t(){e(this,t)}).\u0275mod=d.Fb({type:a}),a.\u0275inj=d.Eb({factory:function(e){return new(e||a)},imports:[[b.i.forChild(g)],b.i]}),a),w=((o=function t(){e(this,t)}).\u0275mod=d.Fb({type:o}),o.\u0275inj=d.Eb({factory:function(e){return new(e||o)},imports:[[c.b,u.d,l.z,v,u.k]]}),o)}}])}();