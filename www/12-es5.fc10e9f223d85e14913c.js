!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{cRhG:function(r,s,n){"use strict";n.r(s),n.d(s,"ProfilePageModule",(function(){return y}));var i=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),c=n("tyNb"),u=n("mrSG"),l=n("fXoL"),m=n("hD8V"),b=n("T4Fs"),d=n("LLt/"),p=n("agf6");function f(e,t){if(1&e&&(l.Kb(0,"ion-select-option",17),l.ec(1),l.Jb()),2&e){var r=t.$implicit;l.Yb("value",r),l.xb(1),l.gc("",r," ")}}var h,g,v,w=[{path:"",component:(h=function(){function r(t,s,n,i,a,c,u,l,m){e(this,r),this.router=t,this.fb=s,this.api=n,this.toaster=i,this.authService=a,this.alertCtrl=c,this.loadingCtrl=u,this.navCtrl=l,this.p=m,this.Province=this.p.Province_list,this.profileForm=this.fb.group({email:["",o.m.required],names:["",o.m.required],surname:["",o.m.required],cell:["",o.m.required],dob:["",o.m.required],province:["",o.m.required],gender:["",o.m.required]})}var s,n,i;return s=r,(n=[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){0==this.authService.isLoggedin()?this.router.navigateByUrl("home"):this.doGetUser()}},{key:"deregister",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"Confirm!",message:"<strong>Delete account?</strong>!!!",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"Okay",handler:function(){r.doDeleteUser()}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"changePass",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"Change Password!",inputs:[{name:"pass",type:"password",placeholder:"New Password",cssClass:"specialClass",attributes:{inputmode:"decimal"}},{name:"pass1",type:"password",placeholder:"Confirm Password",cssClass:"specialClass",attributes:{inputmode:"decimal"}}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Ok",handler:function(e){r.doChangePassword(e.pass,e.pass1)}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"doChangePassword",value:function(e,t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var s,n=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});case 2:if(s=r.sent,""!=e&&""!=t){r.next=7;break}this.presentAlert("Password fields required"),r.next=14;break;case 7:if(t==e){r.next=11;break}this.presentAlert("Passwords do not match! "),r.next=14;break;case 11:return r.next=13,s.present();case 13:this.api.update_password(e).subscribe((function(e){0==e.status?(s.dismiss(),n.toaster.successToast(e.msg)):(s.dismiss(),n.presentAlert(e.msg))}),(function(e){s.dismiss(),n.presentAlert(e.message)}));case 14:case"end":return r.stop()}}),r,this)})))}},{key:"doDeleteUser",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});case 2:return t=e.sent,e.next=5,t.present();case 5:this.api.remove_user(localStorage.getItem("uuid")).subscribe((function(e){0==e.status?(t.dismiss(),r.toaster.successToast(e.msg),localStorage.clear()):(t.dismiss(),r.presentAlert(e.msg))}),(function(e){t.dismiss(),r.presentAlert(e.message)}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"doGetUser",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});case 2:return t=e.sent,e.next=5,t.present();case 5:this.authService.get_user().subscribe((function(e){0==e.status?(r.profileForm.setValue({email:e.data[0].email,names:e.data[0].name,surname:e.data[0].surname,cell:e.data[0].cell,province:e.data[0].province,gender:e.data[0].gender,dob:e.data[0].gender}),t.dismiss()):(t.dismiss(),r.presentAlert(e.msg))}),(function(e){t.dismiss(),r.presentAlert(e.message)}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"doUpdatetUser",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,s,n,i,o,a,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});case 2:return t=e.sent,e.next=5,t.present();case 5:r=this.profileForm.get("names").value,s=this.profileForm.get("surname").value,n=this.profileForm.get("cell").value,i=this.profileForm.get("gender").value,o=this.profileForm.get("province").value,a=this.profileForm.get("email").value,this.api.update_user(r,s,a,n,i,o).subscribe((function(e){0==e.status?(t.dismiss(),c.toaster.successToast(e.msg)):(t.dismiss(),c.presentAlert(e.msg))}),(function(e){t.dismiss(),c.presentAlert(e.message)}));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlert",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"Air Food \u2708\ufe0f",subHeader:"Warning",message:e,buttons:["OK"]});case 2:return r=t.sent,t.next=5,r.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"revert",value:function(){this.profileForm.reset()}}])&&t(s.prototype,n),i&&t(s,i),r}(),h.\u0275fac=function(e){return new(e||h)(l.Hb(c.g),l.Hb(o.a),l.Hb(m.a),l.Hb(b.a),l.Hb(d.a),l.Hb(a.b),l.Hb(a.B),l.Hb(a.D),l.Hb(p.a))},h.\u0275cmp=l.Bb({type:h,selectors:[["app-profile"]],decls:49,vars:2,consts:[["fullscreen",""],[1,"login-form"],[1,"txt-center"],["name","person-outline",2,"font-size","55px"],["color","dark"],[3,"formGroup"],["formControlName","names","type","text","required","","placeholder","Names"],["formControlName","surname","type","text","required","","placeholder","Surname"],["formControlName","email","type","text","required","","placeholder","Email"],["formControlName","cell","type","text","required","","placeholder","Phone Number"],["formControlName","gender","value","select","okText","Okay","cancelText","Dismiss"],["value","male"],["value","female"],["formControlName","province","value","select","okText","Okay","cancelText","Dismiss"],[3,"value",4,"ngFor","ngForOf"],["type","submit","color","primary",1,"txt-center",3,"click"],["type","submit","color","danger",1,"txt-center",3,"click"],[3,"value"]],template:function(e,t){1&e&&(l.Kb(0,"ion-content",0),l.Kb(1,"ion-grid"),l.Kb(2,"div",1),l.Kb(3,"ion-col"),l.Kb(4,"div",2),l.Ib(5,"ion-icon",3),l.Ib(6,"br"),l.Kb(7,"strong"),l.ec(8,"Profile"),l.Jb(),l.Ib(9,"br"),l.Kb(10,"ion-label",4),l.ec(11,"Seasons change, so does reasons to your details "),l.Jb(),l.Ib(12,"br"),l.Ib(13,"br"),l.Jb(),l.Kb(14,"form",5),l.Kb(15,"ion-row"),l.Kb(16,"ion-col"),l.Ib(17,"ion-input",6),l.Jb(),l.Kb(18,"ion-col"),l.Ib(19,"ion-input",7),l.Jb(),l.Jb(),l.Kb(20,"ion-row"),l.Kb(21,"ion-col"),l.Ib(22,"ion-input",8),l.Jb(),l.Jb(),l.Kb(23,"ion-row"),l.Kb(24,"ion-col"),l.Ib(25,"ion-input",9),l.Jb(),l.Jb(),l.Kb(26,"ion-row"),l.Kb(27,"ion-col"),l.Kb(28,"ion-item"),l.Kb(29,"ion-label"),l.ec(30,"Gender:"),l.Jb(),l.Kb(31,"ion-select",10),l.Kb(32,"ion-select-option",11),l.ec(33,"male"),l.Jb(),l.Kb(34,"ion-select-option",12),l.ec(35,"female"),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Kb(36,"ion-row"),l.Kb(37,"ion-col"),l.Kb(38,"ion-item"),l.Kb(39,"ion-label"),l.ec(40,"Province:"),l.Jb(),l.Kb(41,"ion-select",13),l.dc(42,f,2,2,"ion-select-option",14),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Kb(43,"ion-button",15),l.Sb("click",(function(){return t.doUpdatetUser()})),l.ec(44,"Update profile"),l.Jb(),l.Kb(45,"ion-button",15),l.Sb("click",(function(){return t.changePass()})),l.ec(46,"Change Password"),l.Jb(),l.Kb(47,"ion-button",16),l.Sb("click",(function(){return t.deregister()})),l.ec(48,"Delete Account"),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb()),2&e&&(l.xb(14),l.Xb("formGroup",t.profileForm),l.xb(28),l.Xb("ngForOf",t.Province))},directives:[a.f,a.i,a.e,a.k,a.n,o.n,o.i,o.c,a.r,a.l,a.K,o.h,o.b,o.l,a.m,a.v,a.J,a.w,i.h,a.d],styles:[""]}),h)}],x=((v=function t(){e(this,t)}).\u0275mod=l.Fb({type:v}),v.\u0275inj=l.Eb({factory:function(e){return new(e||v)},imports:[[c.i.forChild(w)],c.i]}),v),y=((g=function t(){e(this,t)}).\u0275mod=l.Fb({type:g}),g.\u0275inj=l.Eb({factory:function(e){return new(e||g)},imports:[[i.b,o.d,a.z,x,o.k]]}),g)}}])}();