(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{cRhG:function(e,t,s){"use strict";s.r(t),s.d(t,"ProfilePageModule",(function(){return f}));var i=s("ofXK"),o=s("3Pt+"),r=s("TEn/"),n=s("tyNb"),a=s("mrSG"),l=s("fXoL"),c=s("hD8V"),d=s("T4Fs"),b=s("LLt/"),u=s("agf6"),m=s("Sy1n");function h(e,t){if(1&e&&(l.Kb(0,"ion-select-option",20),l.gc(1),l.Jb()),2&e){const e=t.$implicit;l.ac("value",e),l.xb(1),l.ic("",e," ")}}const p=[{path:"",component:(()=>{class e{constructor(e,t,s,i,r,n,a,l,c,d){this.router=e,this.fb=t,this.api=s,this.toaster=i,this.authService=r,this.alertCtrl=n,this.loadingCtrl=a,this.navCtrl=l,this.p=c,this.app=d,this.Province=this.p.Province_list,this.profileForm=this.fb.group({email:["",o.m.required],names:["",o.m.required],surname:["",o.m.required],cell:["",o.m.required],dob:["",o.m.required],province:["",o.m.required],gender:["",o.m.required]})}ngOnInit(){}ionViewWillEnter(){0==this.authService.isLoggedin()?this.router.navigateByUrl("home"):this.doGetUser()}deregister(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Confirm!",message:"<strong>Delete account?  \u26a0\ufe0f</strong>!!!",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"Okay",handler:()=>{this.doDeleteUser()}}]});yield e.present()}))}deactivate(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Confirm!",message:"<strong>Deactivate account?  \u26a0\ufe0f</strong>!!!\nYou can always re-activate your account again at a later stage",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"Okay",handler:()=>{this.doDeactivateUser()}}]});yield e.present()}))}changePass(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Change Password!",inputs:[{name:"pass",type:"password",placeholder:"New Password",cssClass:"specialClass",attributes:{inputmode:"decimal"}},{name:"pass1",type:"password",placeholder:"Confirm Password",cssClass:"specialClass",attributes:{inputmode:"decimal"}}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Ok",handler:e=>{this.doChangePassword(e.pass,e.pass1)}}]});yield e.present()}))}doChangePassword(e,t){return Object(a.a)(this,void 0,void 0,(function*(){const s=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});""==e||""==t?this.presentAlert("Password fields required \u26a0\ufe0f"):t!=e?this.presentAlert("Passwords do not match! \u274c"):this.api.validatePass(e)?this.presentAlert("Weak Password detected \u{1f44e}\u274c"):(yield s.present(),this.api.update_password(e).subscribe(e=>{0==e.status?(s.dismiss(),this.toaster.successToast(e.msg)):(s.dismiss(),this.presentAlert(e.msg))},e=>{s.dismiss(),this.presentAlert(e.message)}))}))}doDeleteUser(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});yield e.present(),this.api.remove_user(localStorage.getItem("uuid")).subscribe(t=>{0==t.status?(e.dismiss(),this.toaster.successToast(t.msg),this.authService.logout()):(e.dismiss(),this.presentAlert(t.msg))},t=>{e.dismiss(),this.presentAlert("Could not connect to server \u{1f5a5}\ufe0f, check your internet connection!")})}))}doDeactivateUser(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});yield e.present(),this.api.deactivate_user().subscribe(t=>{0==t.status?(e.dismiss(),this.toaster.successToast(t.msg),this.authService.logout(),this.app.openPage("Booking"),location.reload()):(e.dismiss(),this.presentAlert(t.msg))},t=>{e.dismiss(),this.presentAlert("Could not connect to server \u{1f5a5}\ufe0f, check your internet connection!")})}))}doGetUser(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});yield e.present(),this.authService.get_user().subscribe(t=>{0==t.status?(this.profileForm.setValue({email:t.data[0].email,names:t.data[0].name,surname:t.data[0].surname,cell:t.data[0].cell,province:t.data[0].province,gender:t.data[0].gender,dob:t.data[0].date_of_birth}),this.profileForm.controls.email.disable(),e.dismiss()):(e.dismiss(),this.presentAlert(t.msg))},t=>{e.dismiss(),this.presentAlert("Could not connect to server \u{1f5a5}\ufe0f, check your internet connection!")})}))}doUpdatetUser(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});let t=this.profileForm.get("names").value,s=this.profileForm.get("surname").value,i=this.profileForm.get("cell").value,o=this.profileForm.get("gender").value,r=this.profileForm.get("province").value,n=this.profileForm.get("email").value,a=this.profileForm.get("dob").value;null==n||""==o||""==r||""==t||""==s||""==i||""==a?this.presentAlert("All fields are required! \u26a0\ufe0f"):isNaN(i)||i.length<=9?this.presentAlert("Phone number should consist of only numbers and atleast 10 digits long \u274c"):this.api.validateName(t)||this.api.validateName(s)?this.presentAlert("names and surname should consist of only characters and no special symbols \u274c"):this.api.validateEmail(n)?this.api.validateCell(i)?(yield e.present(),this.api.update_user(t,s,n,i,o,r,a).subscribe(t=>{0==t.status?(e.dismiss(),this.toaster.successToast(t.msg)):(e.dismiss(),this.presentAlert(t.msg))},t=>{e.dismiss(),this.presentAlert("Could not connect to server \u{1f5a5}\ufe0f, check your internet connection!")})):this.presentAlert("Invalid Phone number \u274c"):this.presentAlert("Invalid email entered \u274c")}))}presentAlert(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Air Food \u2708\ufe0f",subHeader:"Warning",message:e,buttons:["OK"]});yield t.present()}))}revert(){this.profileForm.reset()}}return e.\u0275fac=function(t){return new(t||e)(l.Hb(n.g),l.Hb(o.a),l.Hb(c.a),l.Hb(d.a),l.Hb(b.a),l.Hb(r.b),l.Hb(r.K),l.Hb(r.N),l.Hb(u.a),l.Hb(m.a))},e.\u0275cmp=l.Bb({type:e,selectors:[["app-profile"]],decls:61,vars:2,consts:[["fullscreen",""],[1,"login-form"],[1,"txt-center"],["name","person-circle-outline",2,"font-size","55px"],["color","dark"],[3,"formGroup"],["formControlName","names","type","text","required","","placeholder","Names"],["formControlName","surname","type","text","required","","placeholder","Surname"],["formControlName","email","type","text","required","","placeholder","Email"],["formControlName","cell","type","text","required","","placeholder","Phone Number"],["formControlName","dob","placeholder","Date Of Birth","disabled","","displayFormat","YYYY-MM-DD","max","2002",1,"txt-center",2,"text-align","center","border","1px solid #3880ff","border-radius","5px"],["formControlName","gender","value","select","okText","Okay","cancelText","Dismiss"],["value","male"],["value","female"],["formControlName","province","value","select","okText","Okay","cancelText","Dismiss",2,"text-align","left"],[3,"value",4,"ngFor","ngForOf"],["color","primary",1,"txt-center",3,"click"],["color","secondary",1,"txt-center",3,"click"],["color","warning",1,"txt-center",3,"click"],["color","danger",1,"txt-center",3,"click"],[3,"value"]],template:function(e,t){1&e&&(l.Kb(0,"ion-content",0),l.Kb(1,"ion-grid"),l.Kb(2,"div",1),l.Kb(3,"div",2),l.Ib(4,"ion-icon",3),l.Ib(5,"br"),l.Kb(6,"strong"),l.gc(7,"Profile"),l.Jb(),l.Ib(8,"br"),l.Kb(9,"ion-label",4),l.gc(10,"Seasons change, so does reasons to your details "),l.Jb(),l.Ib(11,"br"),l.Ib(12,"br"),l.Jb(),l.Kb(13,"form",5),l.Kb(14,"ion-row"),l.Kb(15,"ion-col"),l.Ib(16,"ion-input",6),l.Jb(),l.Jb(),l.Kb(17,"ion-row"),l.Kb(18,"ion-col"),l.Ib(19,"ion-input",7),l.Jb(),l.Jb(),l.Kb(20,"ion-row"),l.Kb(21,"ion-col"),l.Ib(22,"ion-input",8),l.Jb(),l.Kb(23,"ion-col"),l.Ib(24,"ion-input",9),l.Jb(),l.Jb(),l.Kb(25,"ion-row"),l.Kb(26,"ion-col"),l.Ib(27,"ion-datetime",10),l.Jb(),l.Jb(),l.Kb(28,"ion-row"),l.Kb(29,"ion-col"),l.Kb(30,"ion-item"),l.Kb(31,"ion-label"),l.gc(32,"Gender:"),l.Jb(),l.Kb(33,"ion-select",11),l.Kb(34,"ion-select-option",12),l.gc(35,"male"),l.Jb(),l.Kb(36,"ion-select-option",13),l.gc(37,"female"),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Kb(38,"ion-row"),l.Kb(39,"ion-col"),l.Kb(40,"ion-item"),l.Kb(41,"ion-label"),l.gc(42,"Province:"),l.Jb(),l.Kb(43,"ion-select",14),l.fc(44,h,2,2,"ion-select-option",15),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Kb(45,"ion-row"),l.Kb(46,"ion-col"),l.Kb(47,"ion-button",16),l.Sb("click",(function(){return t.doUpdatetUser()})),l.gc(48,"Update profile"),l.Jb(),l.Jb(),l.Jb(),l.Kb(49,"ion-row"),l.Kb(50,"ion-col"),l.Kb(51,"ion-button",17),l.Sb("click",(function(){return t.changePass()})),l.gc(52,"Change Password"),l.Jb(),l.Jb(),l.Jb(),l.Kb(53,"ion-row"),l.Kb(54,"ion-col"),l.Kb(55,"ion-button",18),l.Sb("click",(function(){return t.deactivate()})),l.gc(56,"Deactivate Account"),l.Jb(),l.Jb(),l.Kb(57,"ion-col"),l.Kb(58,"ion-button",19),l.Sb("click",(function(){return t.deregister()})),l.gc(59,"Delete Account"),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Ib(60,"br"),l.Jb(),l.Jb(),l.Jb()),2&e&&(l.xb(13),l.Zb("formGroup",t.profileForm),l.xb(31),l.Zb("ngForOf",t.Province))},directives:[r.l,r.o,r.q,r.t,o.n,o.i,o.c,r.z,r.k,r.r,r.U,o.h,o.b,o.l,r.m,r.T,r.s,r.D,r.E,i.h,r.e],styles:[""]}),e})()}];let g=(()=>{class e{}return e.\u0275mod=l.Fb({type:e}),e.\u0275inj=l.Eb({factory:function(t){return new(t||e)},imports:[[n.j.forChild(p)],n.j]}),e})(),f=(()=>{class e{}return e.\u0275mod=l.Fb({type:e}),e.\u0275inj=l.Eb({factory:function(t){return new(t||e)},imports:[[i.b,o.d,r.I,g,o.k]]}),e})()}}]);