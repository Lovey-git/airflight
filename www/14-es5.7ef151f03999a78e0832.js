!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{x5bZ:function(r,s,n){"use strict";n.r(s),n.d(s,"RegisterPageModule",(function(){return x}));var i,a,o,l=n("ofXK"),u=n("3Pt+"),b=n("TEn/"),c=n("tyNb"),m=n("mrSG"),d=n("wd/R"),p=n("fXoL"),h=n("hD8V"),f=n("T4Fs"),g=n("LLt/"),v=[{path:"",component:(i=function(){function r(t,s,n,i,a,o,l,b){e(this,r),this.router=t,this.fb=s,this.api=n,this.toaster=i,this.authService=a,this.alertCtrl=o,this.loadingCtrl=l,this.navCtrl=b,this.minDate=d().add(0,"d").format().toString(),this.registerForm=this.fb.group({email:["",u.m.required],password:["",u.m.required],password1:["",u.m.required],names:["",u.m.required],surname:["",u.m.required],cell:["",u.m.required],dob:["",u.m.required]})}var s,n,i;return s=r,(n=[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){this.authService.isLoggedin()&&("admin"==localStorage.getItem("ur")?this.router.navigateByUrl("report"):(localStorage.getItem("current_page"),this.router.navigateByUrl("home")))}},{key:"presentAlert",value:function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"Air Food \u2708\ufe0f",subHeader:"Warning",message:e,buttons:["OK"]});case 2:return r=t.sent,t.next=5,r.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"register",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,s,n,i,a,o,l,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.registerForm.get("email").value,r=this.registerForm.get("password").value,s=this.registerForm.get("password1").value,n=this.registerForm.get("names").value,i=this.registerForm.get("surname").value,a=this.registerForm.get("cell").value,this.dob=this.registerForm.get("dob").value,e.next=4,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Please wait..."});case 4:if(o=e.sent,l=/^[!@#$%^&*()_+\=\[\]{};:"\\|,.<>\/?]*$/,null!=t&&""!=r&&""!=s&&""!=n&&""!=i&&""!=a){e.next=10;break}this.presentAlert("All fields are required!"),e.next=37;break;case 10:if(r==s){e.next=14;break}this.presentAlert("Passwords do not match"),e.next=37;break;case 14:if(!(isNaN(a)||a.length<=9)){e.next=18;break}this.presentAlert("Phone number should consist of only numbers and atleast 10 digits long"),e.next=37;break;case 18:if(!n.match(l)&&!i.match(l)&&0!=isNaN(n)&&0!=isNaN(i)){e.next=22;break}this.presentAlert("names and surname should consist of only characters and no special symbols"),e.next=37;break;case 22:if(!this.validateEmail(t)){e.next=36;break}if(this.dob.substr(0,10)!=this.minDate.substr(0,10)){e.next=27;break}this.presentAlert("You might just be a very smart \ud83d\udc76 infant to even use a computer!"),e.next=34;break;case 27:if(!(parseInt(this.minDate.substr(0,4))-parseInt(this.dob.substr(0,4))<=17)){e.next=31;break}this.presentAlert("You must be atleast 18 years old to register!"),console.log(parseInt(this.dob.substr(0,4))-parseInt(this.minDate.substr(0,4))),e.next=34;break;case 31:return e.next=33,o.present();case 33:this.api.register(t,r,n,i).subscribe((function(e){0==e.status?(o.dismiss(),console.log(e),u.toaster.successToast(e.msg),u.router.navigateByUrl("login")):(o.dismiss(),u.presentAlert(e.msg))}),(function(e){o.dismiss(),u.presentAlert(e.message)}));case 34:e.next=37;break;case 36:this.presentAlert("Invalid email entered");case 37:case"end":return e.stop()}}),e,this)})))}},{key:"validateEmail",value:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"revert",value:function(){this.registerForm.reset()}}])&&t(s.prototype,n),i&&t(s,i),r}(),i.\u0275fac=function(e){return new(e||i)(p.Hb(c.g),p.Hb(u.a),p.Hb(h.a),p.Hb(f.a),p.Hb(g.a),p.Hb(b.b),p.Hb(b.B),p.Hb(b.D))},i.\u0275cmp=p.Bb({type:i,selectors:[["app-register"]],decls:35,vars:1,consts:[["fullscreen",""],[1,"login-form"],[1,"txt-center"],["name","person-add-outline",2,"font-size","55px"],["color","dark"],[3,"formGroup"],["formControlName","names","type","text","required","","placeholder","Names"],["formControlName","surname","type","text","required","","placeholder","Surname"],["formControlName","email","type","text","required","","placeholder","Email"],["formControlName","cell","type","tel","required","","placeholder","Phone Number"],["formControlName","dob","placeholder","Date Of Birth","displayFormat","YYYY-MM-DD","max","2020",2,"text-align","center","border","1px solid #3880ff","border-radius","5px"],["formControlName","password","type","password","required","","placeholder","Password"],["formControlName","password1","type","password","required","","placeholder","Confirm Password"],["type","submit","color","primary",1,"txt-center",3,"click"],["color","primary","routerLink","/login"]],template:function(e,t){1&e&&(p.Kb(0,"ion-content",0),p.Kb(1,"ion-grid"),p.Kb(2,"div",1),p.Kb(3,"ion-col"),p.Kb(4,"div",2),p.Ib(5,"ion-icon",3),p.Ib(6,"br"),p.Kb(7,"strong"),p.ec(8,"Register"),p.Jb(),p.Ib(9,"br"),p.Kb(10,"ion-label",4),p.ec(11,"Great adventures begin here!"),p.Jb(),p.Ib(12,"br"),p.Ib(13,"br"),p.Jb(),p.Kb(14,"form",5),p.Ib(15,"ion-input",6),p.Ib(16,"br"),p.Ib(17,"ion-input",7),p.Ib(18,"br"),p.Ib(19,"ion-input",8),p.Ib(20,"br"),p.Ib(21,"ion-input",9),p.Ib(22,"br"),p.Kb(23,"ion-col"),p.Ib(24,"ion-datetime",10),p.Jb(),p.Ib(25,"ion-input",11),p.Ib(26,"br"),p.Ib(27,"ion-input",12),p.Ib(28,"br"),p.Kb(29,"ion-button",13),p.Sb("click",(function(){return t.register()})),p.ec(30,"Register"),p.Jb(),p.Jb(),p.Kb(31,"ion-footer",2),p.Ib(32,"br"),p.Kb(33,"ion-label",14),p.ec(34,"already have an accout? sign in here."),p.Jb(),p.Jb(),p.Jb(),p.Jb(),p.Jb(),p.Jb()),2&e&&(p.xb(14),p.Xb("formGroup",t.registerForm))},directives:[b.f,b.i,b.e,b.k,b.n,u.n,u.i,u.c,b.l,b.K,u.h,u.b,u.l,b.g,b.J,b.d,b.h,b.I,c.h],styles:[""]}),i)}],y=((o=function t(){e(this,t)}).\u0275mod=p.Fb({type:o}),o.\u0275inj=p.Eb({factory:function(e){return new(e||o)},imports:[[c.i.forChild(v)],c.i]}),o),x=((a=function t(){e(this,t)}).\u0275mod=p.Fb({type:a}),a.\u0275inj=p.Eb({factory:function(e){return new(e||a)},imports:[[l.b,u.d,b.z,y,u.k]]}),a)}}])}();